(()=>{"use strict";var e={},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}function n(e){const t={NODE_ENV:"production",PUBLIC_URL:"https://growmefrontendassetsstack-growheadlessbucket79e0b0-aqcqbhbrt0qb.s3.amazonaws.com",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PACKAGE_VERSION:"1.18.8",SC_ATTR:"data-styled-grow-me",REACT_APP_BACKEND_BASE_URL:"https://api.grow.me",REACT_APP_LOGIN_IFRAME_URL:"https://app.grow.me/iframe-login",REACT_APP_SCRIPT_SRC_ROOT:"https://scripts.grow.me",REACT_APP_SNOWPLOW_APP_ID:"growheadless",REACT_APP_SNOWPLOW_COLLECTOR_URL:"https://some.growplow.events/com.snowplowanalytics.snowplow/tp2",REACT_APP_SNOWPLOW_TRACKER_NAMESPACE:"grow-me-headless-prod",REACT_APP_USE_PERSISTED_QUERIES:"true"}[e];if(!t)throw new Error(`Required environment variable "${e}" not found`);return t}a.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(o,i),o}})(),a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".ea8ed4f3.chunk.js",a.miniCssF=e=>{},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="@mediavine/grow-headless:";a.l=(n,r,o,i)=>{if(e[n])e[n].push(r);else{var s,d;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+o){s=u;break}}s||(d=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+o),s.src=n),e[n]=[r];var f=(t,a)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(a))),t)return t(a)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),d&&document.head.appendChild(s)}}})(),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="https://growmefrontendassetsstack-growheadlessbucket79e0b0-aqcqbhbrt0qb.s3.amazonaws.com/",(()=>{var e={524:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((a,n)=>r=e[t]=[a,n]));n.push(r[2]=o);var i=a.p+a.u(t),s=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,i=n[0],s=n[1],d=n[2],c=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(d)d(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunk_mediavine_grow_headless=self.webpackChunk_mediavine_grow_headless||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();const r=n("REACT_APP_BACKEND_BASE_URL"),o=(n("REACT_APP_SCRIPT_SRC_ROOT"),n("REACT_APP_SNOWPLOW_COLLECTOR_URL")),i=n("REACT_APP_SNOWPLOW_APP_ID"),s=n("REACT_APP_SNOWPLOW_TRACKER_NAMESPACE"),d=n("REACT_APP_PACKAGE_VERSION"),c=n("REACT_APP_LOGIN_IFRAME_URL"),l="iglu:com.mediavine/render_event/jsonschema/1-0-0";function u(e){if("true"===localStorage.getItem("grow:debug")){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];console.log(e,...a)}}const f="__uid_2";function p(e){try{const t=window.__uid2.getAdvertisingToken();t&&(u("Initialize UID2",{advertisingToken:t}),e({name:"uid2AdvertisingTokenChanged",value:{advertisingToken:t}}))}catch(t){console.error(t)}}function g(e,t){const a=window.__uid2;try{a.init({identity:JSON.parse(e),callback:()=>{t&&p(t)}})}catch(n){console.error(n)}}async function v(){window.__uid2||await a.e(956).then(a.t.bind(a,956,19))}const m={setItem:function(e,t){try{let a;a="grow-faves:anonymousBookmarks"===e?JSON.stringify(t):String(t),localStorage.setItem(e,a)}catch(a){console.error(a)}},getItem:function(e){try{const t=localStorage.getItem(e);if(null===t)return null;switch(e){case"grow-faves:authSource":case"grow-faves:accessToken":case"grow-faves:refreshToken":case"grow-faves:expirationTime":case"grow-faves:cookiesNotAllowed":case"grow-faves:anonymousId":case"grow-faves:unverifiedReaderId":case"grow-faves:amazonApsEnvelope":case"grow-faves:amazon:retryTime":case"grow-faves:connectId:retryTime":case"grow-faves:liveramp:retryTime":case"grow-faves:publink:retryTime":case"grow-faves:uid2:retryTime":return t;case"grow-faves:anonymousBookmarks":return function(e){let t;try{t=JSON.parse(e)}catch(a){return[]}return Array.isArray(t)?t.map((e=>function(e){if(!e||"object"!==typeof e)return!1;const t=e;return"string"===typeof t.id&&"string"===typeof t.pageId&&"string"===typeof t.description&&"string"===typeof t.imgUrl&&"string"===typeof t.url}(e)?e:null)).filter(D):[]}(t);case"grow-faves:liverampEnvelope":return function(e){try{const t=JSON.parse(e);if(t&&"string"===typeof t.expiresAt&&new Date<new Date(t.expiresAt)&&"string"===typeof t.envelope)return t}catch(t){}return m.removeItem("grow-faves:liverampEnvelope"),null}(t);default:return null}}catch(t){return console.error(t),null}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){console.error(t)}}};const w=m,h={accessToken:null,refreshToken:null,expirationTime:null};const I=e=>x()&&localStorage.getItem(e)||h[e],b=(e,t)=>h[e]=t,S=()=>{h.accessToken=null,h.refreshToken=null,h.expirationTime=null};function y(e){const t=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():""}function _(e){let{accessToken:t,refreshToken:a,expiresIn:n}=e;localStorage.setItem("grow-faves:accessToken",t),localStorage.setItem("grow-faves:refreshToken",a),localStorage.setItem("grow-faves:expirationTime",function(e){return new Date(Date.now()+1e3*Number(e)).toUTCString()}(n))}async function k(e){let{apiBaseUrl:t}=e;if(!localStorage.getItem("grow-faves:refreshToken"))throw new Error("No refresh token found");const a=await async function(e){const t=localStorage.getItem("grow-faves:refreshToken");if(!t)throw new Error("No refresh token found");const a=await fetch(`${e}/token`,{method:"POST",body:new URLSearchParams({grant_type:"refresh_token",refresh_token:t})}),n=await a.json();if("refresh_token"in n){const e={accessToken:n.access_token,refreshToken:n.refresh_token,expiresIn:n.expires_in};return _(e),e}throw 401!==a.status&&400!==a.status||O(),new Error(n.error)}(t);return a}let E;const T=6e4;async function A(e){let{apiBaseUrl:t}=e;E&&clearTimeout(E);const a=localStorage.getItem("grow-faves:expirationTime"),n=localStorage.getItem("grow-faves:refreshToken");if(!a||!n)return;let r=Number(new Date(a))-Number(new Date)-T;if(r<0){r=1e3*(await k({apiBaseUrl:t})).expiresIn-T}E=window.setTimeout((async()=>{await k({apiBaseUrl:t}),A({apiBaseUrl:t})}),r)}function C(){localStorage.removeItem("grow-faves:liverampEnvelope"),localStorage.removeItem("grow-faves:id5Data"),localStorage.removeItem("grow-faves:publinkData"),localStorage.removeItem("_lr_pairId"),localStorage.removeItem("_lr_pairId_exp"),localStorage.removeItem("_lr_env"),localStorage.removeItem("_lr_env_exp"),function(){const e=window.__uid2;try{e.disconnect()}catch(t){console.error(t)}}()}function O(){C(),localStorage.removeItem("grow-faves:authSource"),localStorage.removeItem("grow-faves:refreshToken"),localStorage.removeItem("grow-faves:accessToken"),localStorage.removeItem("grow-faves:expirationTime")}function U(e){if(!Boolean(null===e||void 0===e?void 0:e.canStoreBrowserData)){const e=I("accessToken"),t=I("refreshToken"),a=I("expirationTime");return Boolean(e&&t&&a)}const t=localStorage.getItem("grow-faves:accessToken"),a=localStorage.getItem("grow-faves:refreshToken"),n=localStorage.getItem("grow-faves:expirationTime");return Boolean(t&&a&&n&&((null===e||void 0===e?void 0:e.ignoreExpiration)||new Date(n)>new Date))}const R=()=>Boolean(document.querySelector("[data-grow-me-print-page]"));function D(e){return void 0!==e&&null!==e}function N(e){let{isLoggedIn:t,unverifiedReaderId:a,authSource:n,ghu:r}=e;return"smartLock"===n?"6":"automailer"===n?"4":"automailerImport"===n?"5":"espLink"===n?"7":"arbitraryForm"===n?"8":t?"1":a?"3":r?"9":"0"}function P(){const e=localStorage.getItem("grow-faves:accessToken");if(!e)return null;const t=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return}}(e);return(null===t||void 0===t?void 0:t.readerId)||null}const L=["publink","liveramp","uid2","amazon","connectId"];function B(e){w.removeItem(`grow-faves:${e}:retryTime`)}function $(e){if(!e)return e;if(e.startsWith("%7B%22unverifiedReaderId%22%3A%22"))return e.replace("%7B%22unverifiedReaderId%22%3A%22","").replace("%22%7D","");if(!e.startsWith('{"unverifiedReaderId":'))return e;try{const{unverifiedReaderId:t}=JSON.parse(e);return t}catch(t){return e}}const x=()=>!1,z={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let V;const j=new Uint8Array(16);function H(){if(!V&&(V="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!V))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return V(j)}const M=[];for(let Ve=0;Ve<256;++Ve)M.push((Ve+256).toString(16).slice(1));function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M[e[t+0]]+M[e[t+1]]+M[e[t+2]]+M[e[t+3]]+"-"+M[e[t+4]]+M[e[t+5]]+"-"+M[e[t+6]]+M[e[t+7]]+"-"+M[e[t+8]]+M[e[t+9]]+"-"+M[e[t+10]]+M[e[t+11]]+M[e[t+12]]+M[e[t+13]]+M[e[t+14]]+M[e[t+15]]}const G=function(e,t,a){if(z.randomUUID&&!t&&!e)return z.randomUUID();const n=(e=e||{}).random||(e.rng||H)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=n[e];return t}return F(n)},J="iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",W=(e,t)=>`${e}x${t}`;const q=class{constructor(e){let{collectorUrl:t,appId:a,trackerNamespace:n,appVersion:r,isEnabled:o=null,snowplowSession:i,initialSessionId:s,sendPageViewId:d=!1}=e;this.appId=void 0,this.appVersion=void 0,this.collectorUrl=void 0,this.snowplowSession=void 0,this.isBeaconAvailable=void 0,this.outQueue=void 0,this.trackerNamespace=void 0,this.isEnabled=void 0,this.skippedEvents=void 0,this.initialSessionId=void 0,this.currentBaseUrl=void 0,this.pageViewId=void 0,this.sendPageViewId=void 0,this.onVisibilityChange=()=>{"hidden"===document.visibilityState&&(this.sendEvent({action:"page_visibility_hidden",category:"pageActions"}),this.sendQueue())},this.sendQueue=()=>{if(0===this.outQueue.length)return;const e=(new Date).getTime().toString();this.outQueue.forEach((t=>{t.stm=e}));const t={schema:J,data:this.outQueue},a=new Blob([JSON.stringify(t)],{type:"application/json"});let n=!1;try{n=navigator.sendBeacon(this.collectorUrl,a)}catch{this.isBeaconAvailable=!1}n||this.snowplowRequest(this.outQueue),this.outQueue=[]},this.initializeStoredUserInfo=()=>{if(!this.isEnabled)return;let e={domainUserId:G(),sessionId:this.initialSessionId||G(),visitCount:1,lastEventTimestamp:Date.now()};this.snowplowSession&&(e=this.snowplowSession);try{localStorage.setItem("growMeSnowplowUserInfo",JSON.stringify(e))}catch(t){}return e},this.getSnowplowUserInfo=()=>{if(this.isEnabled)try{const e=localStorage.getItem("growMeSnowplowUserInfo");if(!e){return this.initializeStoredUserInfo()}return JSON.parse(e)}catch(e){return this.initializeStoredUserInfo()}},this.getAndUpdateSnowplowUserInfo=()=>{if(this.isEnabled)try{let e=this.getSnowplowUserInfo();if(!e)return;return e.sessionId&&Date.now()-e.lastEventTimestamp<18e5?(e=this.updateStoredUserInfo({lastEventTimestamp:Date.now()}),e):(e=this.updateStoredUserInfo({sessionId:G(),lastEventTimestamp:Date.now(),visitCount:e.visitCount+1}),e)}catch{return this.initializeStoredUserInfo()}},this.generatePageViewId=(e,t,a)=>window.btoa(`${e}-${t}-${a}`),this.skippedEvents=[],this.appId=a,this.appVersion=r,this.collectorUrl=t,this.currentBaseUrl=null,this.pageViewId=null,this.isBeaconAvailable=Boolean(window.navigator.sendBeacon),i&&(this.snowplowSession=i),this.outQueue=[],this.trackerNamespace=n,this.isEnabled=o,this.initialSessionId=s,this.sendPageViewId=d,this.initialize()}enable(){this.isEnabled||(this.isEnabled=!0,this.initialize(),this.skippedEvents.length&&this.skippedEvents.forEach((e=>this.sendEvent(e))),this.skippedEvents=[],dispatchEvent(new CustomEvent("GrowSnowplowEnabled")))}disable(){!1!==this.isEnabled&&(this.skippedEvents=[],this.isEnabled=!1,this.deInitialize(),dispatchEvent(new CustomEvent("GrowSnowplowDisabled")))}getIsEnabled(){return this.isEnabled}initialize(){this.isEnabled&&this.isBeaconAvailable&&(document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendQueue))}deInitialize(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendQueue)}enqueueEvent(e){this.isBeaconAvailable?(this.outQueue.push(e),this.outQueue.length>=1&&this.sendQueue()):this.snowplowRequest([e])}sendEvent(e){if(!1===this.isEnabled)return;if(null===this.isEnabled)return void this.skippedEvents.push(e);const{action:t,appVersion:a,category:n,cx:r,eventType:o,ue_px:i,readerId:s,...d}=e,c=this.getAndUpdateSnowplowUserInfo();if(!c)return;const l=navigator.language,u=document.characterSet,f=W(window.screen.width,window.screen.height),p=W(window.innerWidth,window.innerHeight),g=W(document.body.scrollWidth,document.body.scrollHeight),v=String(window.screen.colorDepth),m=(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){console.error(e)}})(),w=JSON.stringify({appVersion:a||this.appVersion,...this.sendPageViewId?{pv_id:this.pageViewId}:{},...d}),h=navigator.cookieEnabled?"1":"0",{domainUserId:I,visitCount:b,sessionId:S}=c,y=this.getEventBody({action:t,appId:this.appId,browserLanguage:l,category:n,collectorUrl:this.collectorUrl,colorDepth:v,cookieEnabled:h,cx:r,documentCharset:u,documentSize:g,domainUserId:I,eventType:o,property:w,readerId:s,screenSize:f,sessionId:S,snowplowSchema:J,timezone:m,trackerNamespace:this.trackerNamespace,ue_px:i,visitCount:b,windowSize:p});this.enqueueEvent(y)}getSnowplowCommonFields(){const e=window.location.href,t=document.referrer,a=String(Date.now()),n=navigator.userAgent;return{timestamp:a,platform:"web",referrer:t,trackerVersion:"0.1.0",pageUrl:e,pageBaseUrl:e.split("#")[0],useragent:n}}getEventBody(e){let{action:t,appId:a,browserLanguage:n,category:r,colorDepth:o,cookieEnabled:i,cx:s,documentCharset:d,documentSize:c,domainUserId:l,eventType:u,property:f,readerId:p,screenSize:g,sessionId:v,timezone:m,trackerNamespace:w,ue_px:h,visitCount:I,windowSize:b}=e;const{timestamp:S,platform:y,referrer:_,trackerVersion:k,pageUrl:E,pageBaseUrl:T,useragent:A}=this.getSnowplowCommonFields();T!==this.currentBaseUrl&&(this.currentBaseUrl=T,this.pageViewId=this.generatePageViewId(T,v||"",S)),this.currentBaseUrl=T;return{...s?{cx:s,ue_px:h}:{se_ca:r,se_ac:t,se_pr:f},aid:a,cd:o,cookie:i,cs:d,dtm:S,ds:c,duid:l,e:u||"se",eid:G(),lang:n,p:y,refr:_,res:g,sid:v,tna:w,tv:k,tz:m,ua:A,uid:p||void 0,url:E,vid:String(I),vp:b}}getPagePingBody(e){let{appId:t,domainUserId:a,minXOffset:n,maxXOffset:r,minYOffset:o,maxYOffset:i,pageTitle:s,sessionId:d,trackerNamespace:c}=e;const{timestamp:l,platform:u,referrer:f,trackerVersion:p,pageUrl:g,useragent:v}=this.getSnowplowCommonFields();return{aid:t,dtm:l,duid:a,e:"pp",eid:G(),p:u,page:s,pp_mix:n,pp_max:r,pp_miy:o,pp_may:i,refr:f,sid:d,tv:p,tna:c,url:g,ua:v}}async snowplowRequest(e){if(this.isEnabled)try{return await fetch(this.collectorUrl,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({schema:J,data:e})})}catch(t){}}updateStoredUserInfo(e){if(this.isEnabled)try{const t=localStorage.getItem("growMeSnowplowUserInfo");if(!t)return this.initializeStoredUserInfo();const a={...JSON.parse(t),...e};return localStorage.setItem("growMeSnowplowUserInfo",JSON.stringify(a)),a}catch(t){return this.initializeStoredUserInfo()}}};let Q=!1,K=!1;function Y(e){let{hasFullTcfConsent:t,isGdpr:a}=e;t&&(Q=t),a&&(K=a)}function X(){return{canStoreData:Q&&K||!K}}const Z={setItem:function(e,t){const{canStoreData:a}=X();if(a)try{const a=String(t);localStorage.setItem(e,a)}catch(n){console.error(n)}},getItem:function(e){try{const t=localStorage.getItem(e);if(null===t)return null;switch(e){case"grow-faves:authSource":case"grow-faves:accessToken":case"grow-faves:id5Data":case"grow-faves:cookiesNotAllowed":case"grow-faves:anonymousId":case"grow-faves:unverifiedReaderId":case"grow-faves:ghu":return t;default:return null}}catch(t){return console.error(t),null}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){console.error(t)}}};function ee(e,t){const a=window;a.ats=a.ats||{},a.ats.retrieveEnvelope=t=>{const a=JSON.stringify({envelope:e});return t&&t(a),a},u("Initialize liveramp",{envelope:e}),t&&t({name:"atsRetrieveEnvelopeSet"})}function te(e,t){const a=new Date;a.setDate(a.getDate()+30),a.setHours(a.getHours()-1),localStorage.setItem("grow-faves:liverampEnvelope",JSON.stringify({envelope:e,expiresAt:a.toISOString()})),B("liveramp"),ee(e,t)}function ae(e){try{const n=e.envelopes.find((e=>"envelopeLiveramp"===e.source));null!==n&&void 0!==n&&n.value&&(t=n.value,a=e.expiresAt,localStorage.setItem("_lr_env",btoa(JSON.stringify({envelope:[t]}))),localStorage.setItem("_lr_env_exp",a),B("liveramp"));const r=e.envelopes.find((e=>"pairIds"===e.source));null!==r&&void 0!==r&&r.value&&function(e,t){const a=btoa(JSON.stringify({envelope:JSON.parse(atob(e))}));localStorage.setItem("_lr_pairId",a),localStorage.setItem("_lr_pairId_exp",t)}(r.value,e.expiresAt)}catch(n){console.error(n)}var t,a}function ne(e,t){u("Initialize ID5",{connectId:e}),t({name:"id5IdChanged",value:{connectId:e}})}function re(){const e=function(){try{const e=localStorage.getItem("grow-faves:id5Data");if(!e)return;return JSON.parse(e)}catch(e){localStorage.removeItem("grow-faves:id5Data")}}();return e&&e.connectId}function oe(e,t){const a=new Date;a.setDate(a.getDate()+1),a.setHours(a.getHours()-1),localStorage.setItem("grow-faves:id5Data",JSON.stringify({connectId:e,expiresAt:a.toISOString()})),B("connectId"),t&&ne(e,t)}const ie="publinkIdChanged",se="grow-faves:publinkData";function de(e,t){t({name:ie,value:{publink:e}})}function ce(){const e=function(){try{const e=localStorage.getItem(se);return e?JSON.parse(e):null}catch(e){localStorage.removeItem(se)}return null}();return e&&"string"===typeof e.refresh&&new Date<new Date(e.refresh)?e:null}function le(e,t){let{publink:a,refresh:n}=e;localStorage.setItem(se,JSON.stringify({publink:a,refresh:n})),B("publink"),a&&t&&de(a,t)}const ue=(function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return e.reduce(((e,t,n)=>`${e}${t}${n in a?a[n]:""}`),"")})`
  query GetIdentityIntegrations(
    $offering: Offerings
    $gdpr: Boolean!
    $gdprConsent: String
    $unverifiedReaderId: ID
    $skipLiveramp: Boolean!
    $skipUid2: Boolean!
    $skipId5: Boolean!
    $skipPublink: Boolean!
    $skipLiverampV2: Boolean!
    $skipAmazonAps: Boolean!
    $useAlternateHash: Boolean
    $siteId: String
    $tcfString: String
  ) {
    liverampEnvelope(
      unverifiedReaderId: $unverifiedReaderId
      useAlternateHash: $useAlternateHash
      tcfString: $tcfString
    ) @skip(if: $skipLiveramp)
    liverampEnvelopes(
      unverifiedReaderId: $unverifiedReaderId
      useAlternateHash: $useAlternateHash
      siteId: $siteId
      tcfString: $tcfString
    ) @skip(if: $skipLiverampV2) {
      envelopes {
        source
        value
        err
      }
      expiresAt
    }
    tradeDeskUid(
      unverifiedReaderId: $unverifiedReaderId
      useAlternateHash: $useAlternateHash
    ) @skip(if: $skipUid2)
    id5Data(
      gdpr: $gdpr
      gdprConsent: $gdprConsent
      unverifiedReaderId: $unverifiedReaderId
      useAlternateHash: $useAlternateHash
    ) @skip(if: $skipId5) {
      connectId
    }
    publinkId(
      unverifiedReaderId: $unverifiedReaderId
      useAlternateHash: $useAlternateHash
      gdpr: $gdpr
      gdprConsent: $gdprConsent
    ) @skip(if: $skipPublink) {
      publink
      refresh
    }
    amazonApsEnvelope(
      useAlternateHash: $useAlternateHash
      offering: $offering
      gdpr: $gdpr
      gdprConsent: $gdprConsent
    ) @skip(if: $skipAmazonAps) {
      aipToken
      cookieExpiry
    }
  }
`;function fe(e,t){t({name:"amazonApsEnvelopeChanged",value:{aipToken:e}})}function pe(e,t){let{aipToken:a,cookieExpiry:n}=e;document.cookie=`AMZN-Token=${a}; expires=${new Date(n).toUTCString()}; path=/;`,localStorage.setItem("grow-faves:amazonApsEnvelope",JSON.stringify({aipToken:a,cookieExpiry:n})),B("amazon"),t&&fe(a,t)}let ge="";const ve=["8acb09f9-0024-4ab8-9fde-4526ab085455","370ec245-6e6c-458a-a48d-236046aa68d8","84a4b205-e48f-49a8-ad28-47215eb34c0d","c5f98d97-75f2-4b33-bf5a-2b2116c01848","5af69155-32ea-49ac-b3ca-78fedb382c21","cb2dbd1b-ba4e-48b5-8282-49b661fd016a","cf05fcc6-f192-457e-b0fc-70c85ef92462","30d48b8a-bc07-4593-a9bd-27ea8c147327","71f54def-4f5b-4409-bc7c-b1213c5e8fc8","7f4f7850-7cb8-4808-a67b-978f82e403a9","86de4634-f7b9-479a-936d-66cff5580c6d","956f879e-d38c-4b67-8084-1d25a9efef6b","704c0ff6-fcd7-45e6-a37d-3f6fd6bb6984","0e035f8a-be1b-49a5-9134-269fd25045eb","f43e887a-f2b1-458b-a918-235b14fa4cdc","2132909e-8ab2-4924-8b62-c77a49f28724","83d061c7-5865-427c-a68f-e9ac541d56ee","88345bbb-aa68-4584-801a-8460ac2a0fd3","a6c53e68-2a67-49cd-9b1f-3cf877e61e97","f0fdb1b1-0024-49ac-b56c-f5d030f70cec","a0d3bc21-e1e0-46fb-8cf1-0bde2213ed5d","3f1fdc6c-ba40-4f06-ac9a-e0371f4192ac","f55c60a4-2461-4e3f-be4b-35505d02599e","79c8c08e-f13d-49cf-b8ee-780e2ca10b30","6e8fafff-a2b5-4b6b-b923-934475ed9e4c","74280036-e873-44fc-acbd-9803305a17f1","00fe72ee-da4f-40fd-a9cc-e12d1cbaa5a1","aa700959-e3f0-41f1-b1c1-1c3c770b35df","e70e9e93-024f-4078-ac47-fdc40c168b39","051f458c-5ac5-4752-998a-eb46b15796a8","6eae5617-da64-4001-b906-33b040e08c15","77c7699d-3a81-4bb8-8f13-5189e97c0398","adf5048e-4e53-4ff8-81bd-079b47db2763","abf10ddb-cfbf-4674-9c5e-ef2088c95c74","daf37225-bccc-4ae7-ba4a-ee3aaf6371cf","78d94213-653c-442f-9c13-c5319d320b4c","b2c41b8f-21d8-4bc2-a20f-2c3813414413","05482a3b-5ec8-4f8c-bd8f-cdd3676fc9db","3365d0e4-08d7-4f31-bb71-8b8a367ace9e","7979f069-30a7-4f4a-9179-f04f2630ffa5","bf810843-4fd8-437c-b9ec-848299bbb69f","8000b02d-584c-496c-bad1-2387941e7bd4","de6c5129-ace7-4684-a977-2daafba84a7e","09b0a282-7178-4e0e-ae84-b4fb2aac16dc","77ac4424-174f-441e-88dc-30e341e831b5","13b95ef1-c91b-4580-9387-50898dacb66e","42736091-2f17-44d0-a4fc-e37fc09fe9af","8170e651-a04d-40d3-a87f-99fd18a1ec23","07fc3c76-9a95-406c-8a76-13ab98b9edc1","038af163-039e-404a-90ff-b0b857cc736c","45ea23cf-3112-4823-801b-933f0ec2c074","eaf5eeea-870a-4a59-acaa-63d5b17e7eca","942c0fa3-8d1d-4c97-a3e2-c92db6241f7d","13b8407e-d42f-4d3a-9558-248da818b9d9","700f8c9c-857c-4292-85d3-7935bb5d4d6c","cdeeff2d-a8e6-45d6-aa68-f3289afc956f","fe1bde4f-4909-4d11-9faf-c2b5de13c808","792313fe-6500-49d5-b6be-72fb365ee39a","b270b545-f498-4b72-9816-e96dba2e3a45","64b1cc5d-3876-42e7-8a73-c1cdefce087c","a55ba647-305d-4d64-8e76-8fde0bda9404","047effc5-e472-4c7b-aea6-d8be990bcd02","dc4b0773-0c95-4016-a55a-4d9b5d038d90","9f114a71-5c14-4260-92de-08b5c63c0e54","c38d2f6b-46f9-4a99-9e28-27e9c67e3b5b","cf0ee0d6-81fb-4edd-a755-52efab353484","d1519a5a-3a4a-4548-a35f-8dd762917396","601003d0-c496-437a-9337-4c595183ecff","8e893f87-bb1d-40ab-9f4d-e7898e07fbea","5a2f7ccd-b2fa-40e8-b3ef-2f3b00d38938","168971ae-ede2-4949-8042-96ff2f252455","0b190576-2510-43f1-a397-a47fe2c96455","e43a170f-d226-4b6f-bcca-d84914693e0d","cc096ab0-d9cf-4a28-8e05-ae7ba97a9501","b579fa32-ccc3-4108-ab9a-6f75b50f66ab","5d0a09b0-eea6-413f-8551-2687957cd59d","3b69b0da-1732-47ff-a70c-5a2cd25c19cd","3cefa55a-ac83-484c-85c9-519e1331c181","7174a7ab-6cc2-4131-857e-4ad021ccfb8b","512e18a7-d39c-4758-aa27-61ad912ec924","43855937-18ac-4a73-b36a-9b17b9c014fd","1db16f8f-0324-45f3-8fa1-768f363cde22","2421c15f-700a-4f47-bbde-980740ddb6c0","d28508fc-86e5-494c-95c4-b61b04041e5c","bbc176d0-6d12-4440-b634-0159f44a6572","631c69df-2655-4948-ada8-fdd842c54098","a21639a8-c68e-4fec-a6a2-1c0a12a1a831","879fcada-9168-4117-bd08-9c57960f226f","e253f77e-e60e-4fe2-b64d-e471e015c033"];async function me(e){await v();const{countryCode:t,unverifiedReaderId:a,isGrowHeadless:n,ghu:r,readerId:o,siteId:i,features:s,tcData:d,gdpr:c,hasFullTcfConsent:l}=e,u="US"===t,m=null===s||void 0===s?void 0:s.includes("subscribe_consent_updates"),h=Boolean(window.$adManagementConfig||window.$mediavine),I=U({canStoreBrowserData:!0}),b=null===d||void 0===d?void 0:d.tcString,S=Boolean(!u&&m&&!n),_=Boolean(u||c&&S&&(null===d||void 0===d?void 0:d.vendor.consents[97])&&d.vendor.consents[858]&&l);let k=Boolean(h&&(u||S)&&(I||a||r));o&&ve.includes(o)&&(k=!1);const E=L.filter((e=>{const t=w.getItem(`grow-faves:${e}:retryTime`);if(t&&new Date<new Date(t))return!0})),T=!u||function(){try{const e=y(f);return Boolean(e)}catch(e){return console.error(e),!1}}()||E.includes("uid2"),A=Boolean(re())||E.includes("connectId"),C=!_||function(){const e=localStorage.getItem("grow-faves:liverampEnvelope");if(e)try{const{envelope:t,expiresAt:a}=JSON.parse(e),n=new Date(a).getTime()<(new Date).getTime();if(t&&!n)return!0}catch(t){return!1}return!1}()||E.includes("liveramp"),O=!_||function(){const e=localStorage.getItem("_lr_pairId"),t=localStorage.getItem("_lr_env");if(!e&&!t)return!1;const a=localStorage.getItem("_lr_pairId_exp"),n=localStorage.getItem("_lr_env_exp");return!(a&&new Date>=new Date(a)||n&&new Date>=new Date(n))}()||E.includes("liveramp"),D=function(){const e=ce();return Boolean(e)}()||E.includes("publink"),N=n||!I||function(){const e=localStorage.getItem("grow-faves:amazonApsEnvelope");if(e)try{const{aipToken:t,cookieExpiry:a}=JSON.parse(e),n=new Date(a).getTime()<(new Date).getTime();if(t&&!n)return!0}catch(t){return!1}return!1}()||E.includes("amazon");if(k&&(T&&function(e){try{const t=window.__uid2;if(!y(f))return;t.init({callback:()=>{e&&p(e)}})}catch(t){console.error(t)}}(e.triggerSdkEvent),C&&function(e){try{const t=localStorage.getItem("grow-faves:liverampEnvelope");if(t){const a=JSON.parse(t);new Date(a.expiresAt)>new Date&&a.envelope&&ee(a.envelope,e)}}catch(t){}}(e.triggerSdkEvent),A&&function(e){const t=re();t&&e&&ne(t,e)}(e.triggerSdkEvent),D&&function(e){const t=ce();t&&t.publink&&e&&de(t.publink,e)}(e.triggerSdkEvent),N&&function(e){try{const t=localStorage.getItem("grow-faves:amazonApsEnvelope");if(t){const a=JSON.parse(t);new Date(a.cookieExpiry)>new Date&&a.aipToken&&e&&fe(a.aipToken,e)}}catch(t){}}(e.triggerSdkEvent)),k&&(!T||!A||!C||!D||!O||!N)){var P,B,$;const t={offering:e.offering,gdpr:e.gdpr,gdprConsent:e.gdprConsent,unverifiedReaderId:null!==(P=null!==(B=e.readerId)&&void 0!==B?B:e.unverifiedReaderId)&&void 0!==P?P:e.ghu,skipUid2:T,skipId5:A,skipLiveramp:C,skipLiverampV2:O,skipPublink:D,skipAmazonAps:N,useAlternateHash:!1,siteId:i,tcfString:b};if(JSON.stringify(t)===ge)return;const{data:a,errors:n}=await async function(e){var t;let{apiUrl:a,offering:n,gdpr:r,gdprConsent:o,unverifiedReaderId:i,ghu:s,readerId:d,skipUid2:c,skipId5:l,skipLiveramp:u,skipLiverampV2:f,skipPublink:p,skipAmazonAps:g,useAlternateHash:v,siteId:m,tcfString:h}=e;const I=w.getItem("grow-faves:accessToken"),b={offering:n,gdpr:r,gdprConsent:o,unverifiedReaderId:null!==(t=null!==d&&void 0!==d?d:i)&&void 0!==t?t:s,skipUid2:c,skipId5:l,skipLiveramp:u,skipLiverampV2:f,skipPublink:p,skipAmazonAps:g,useAlternateHash:v,siteId:m,tcfString:h};ge=JSON.stringify(b);const S=await fetch(`${a}/graphql`,{method:"post",body:JSON.stringify({query:ue,variables:b,operationName:"GetIdentityIntegrations"}),headers:I?{"Content-Type":"application/json",Authorization:`Bearer ${I}`}:{"Content-Type":"application/json"}}),{data:y,errors:_}=await S.json();return{data:y,errors:_}}({...e,...t});var x,z,V,j,H,M,F,G;if(function(e){if(e)for(const t of e)if("IDENTITY_INTEGRATION_API_ERROR"===t.extensions.code){const{integrationType:e,retryTime:a}=t.extensions;if(!e||!a)continue;w.setItem(`grow-faves:${e}:retryTime`,a)}}(n),a.liverampEnvelope&&te(a.liverampEnvelope,e.triggerSdkEvent),a.liverampEnvelopes&&ae(a.liverampEnvelopes),a.tradeDeskUid&&g(a.tradeDeskUid,e.triggerSdkEvent),null!==($=a.id5Data)&&void 0!==$&&$.connectId)oe(null===(x=a.id5Data)||void 0===x?void 0:x.connectId,e.triggerSdkEvent);if(a.publinkId&&le(a.publinkId,e.triggerSdkEvent),a.amazonApsEnvelope&&pe(a.amazonApsEnvelope,e.triggerSdkEvent),window.opener&&R())window.opener.postMessage({type:"GROW_IDS_GENERATED",uid2:null!==(z=a.tradeDeskUid)&&void 0!==z?z:null,id5:null!==(V=null===(j=a.id5Data)||void 0===j?void 0:j.connectId)&&void 0!==V?V:null,publinkId:null!==(H=a.publinkId)&&void 0!==H?H:null,liverampEnvelope:null!==(M=a.liverampEnvelope)&&void 0!==M?M:null,liverampEnvelopes:null!==(F=a.liverampEnvelopes)&&void 0!==F?F:null,amazonApsEnvelope:null!==(G=a.amazonApsEnvelope)&&void 0!==G?G:null},"*")}}const we=["page_render","page_init"];function he(e){let t,{actionName:a}=e;switch(a){case"page_render":t={schema:l,data:{renderCategory:"page_render",renderLocation:""}};break;case"page_init":t={schema:l,data:{renderCategory:"page_init",renderLocation:""}};break;default:t={schema:"",data:{}}}return t}const Ie=async function(e){var t;const a=new URL(`${r}/graphql`),n=await fetch(a.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        mutation FindOrCreateGhu($emailHash: String!) {\n          findOrCreateGhu(data: { emailHash: $emailHash }) {\n            ghu\n          }\n        }\n      ",variables:{emailHash:e},operationName:"FindOrCreateGhu"})}),o=await n.json();if(null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t.findOrCreateGhu)return o.data.findOrCreateGhu;throw new Error("Failed to fetch ghu id")};const be={setItem:function(e,t){const{canStoreData:a}=X();if(a)return sessionStorage.setItem(e,t),t},getItem:function(e){return sessionStorage.getItem(e)},removeItem:function(e){sessionStorage.removeItem(e)}};const Se=be,ye=/^\S+@\S+\.\S+$/;async function _e(e,t){const a=await async function(e){return await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"])}(e),n=(new TextEncoder).encode(t);return function(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}(await window.crypto.subtle.sign("HMAC",a,n))}function ke(e){return Object.values(e).every((e=>!0===e))&&Object.keys(e).length>0}const Ee=async e=>{let t,{potentialEmail:a,hostname:n,timestamp:o,signature:i}=e,s=null;try{s=await fetch(`${r}/arbitrary-readers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,creationSource:"arbitraryForm",domainSource:n,signature:await _e(n,i),timestamp:o})}),t=200===s.status}catch(c){t=!1}if(!s)return;const{reader:d}=await s.json();return!Z.getItem("grow-faves:unverifiedReaderId")&&null!==d&&void 0!==d&&d.id&&Z.setItem("grow-faves:unverifiedReaderId",d.id),!Z.getItem("grow-faves:authSource")&&null!==d&&void 0!==d&&d.id&&Z.setItem("grow-faves:authSource","arbitraryForm"),d&&(Se.removeItem("grow-faves:arbitraryForm:potentialEmail"),Se.removeItem("grow-faves:arbitraryForm:timestamp"),Se.removeItem("grow-faves:arbitraryForm:signature")),t},Te=e=>{let{sendTrackingEvent:t,isPrivacyState:a,isLoggedIn:n,url:r,initializeIndentityIntegrationsFn:o}=e;const i=null===r||void 0===r?void 0:r.hostname;return async e=>{if(a||n)return;const r=e.target;if(!i)return;const s=[...r.elements].reduce(((e,t)=>{const a=t;return a.value&&(e=>ye.test(e))(a.value)?a.value:e}),null);if(!s)return;Se.setItem("grow-faves:arbitraryForm:potentialEmail",s);const d=String(Date.now());Se.setItem("grow-faves:arbitraryForm:timestamp",d);const c=`${s}:${d}`;Se.setItem("grow-faves:arbitraryForm:signature",c);const l=await Ee({potentialEmail:s,hostname:i,timestamp:d,signature:c});l?(t({name:"arbitrary_form_submission",success:l,form:r.classList.toString()}),o()):t({name:"arbitrary_form_submission_failed"})}};function Ae(e,t){return t.includes(e)?e:null}const Ce=["atsRetrieveEnvelopeSet","uid2AdvertisingTokenChanged","id5IdChanged","publinkIdChanged","amazonApsEnvelopeChanged","authStatusChanged","loaded"];const Oe=function(e){if("true"===localStorage.getItem("grow:debug")){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];console.log(e,...a)}},Ue={};function Re(e){const t=Ue[e.name];t&&(Oe("triggerSdkEvent",e),t.forEach((t=>{try{"value"in e?t(e.value):t()}catch(a){console.error(a)}})))}let De=null,Ne={},Pe=null,Le=null,Be=null;const $e=[".inline-subscribe","#grow-me-root"].join(", "),xe=["redirectUri","growMeCode","growMeShortenerToken","growSource","growReferrer","growUnverifiedReaderId","growAuthSource","growGhu"];const ze=()=>{var e,t,a;const n=U(),r=Z.getItem("grow-faves:unverifiedReaderId"),o=null!==(e=localStorage.getItem("grow-faves:authSource"))&&void 0!==e?e:null,i=Z.getItem("grow-faves:ghu");Re({name:"authStatusChanged",value:{isLoggedIn:n,readerId:n?P():null,gid:N({isLoggedIn:n,unverifiedReaderId:r,authSource:o,ghu:i}),domainSessionId:null===(t=Be)||void 0===t||null===(a=t.getSnowplowUserInfo())||void 0===a?void 0:a.sessionId}})};!async function(){var e,t,a,n,l;if(!document.currentScript)return;Le=document.currentScript.getAttribute("data-grow-headless-beta-name"),Pe=document.currentScript.getAttribute("data-grow-headless-beta-version");const u=U(),f=document.currentScript.getAttribute("data-grow-mediavine-site-id");if(!f)return;const p=window.GrowHeadlessData;if(null===p||void 0===p||!p.privacyData)return;De=p.privacyData;const m=U({ignoreExpiration:!0}),h=null!==(e=De.countryCode)&&void 0!==e?e:"",I=null===(t=De.gdprApplies)||void 0===t||t;let y=!I;Y({isGdpr:I,hasFullTcfConsent:y});let k=y;const E=e=>{var t;let{name:a,...n}=e;Be&&function(e){const t=e;return we.includes(t)}(a)&&Be.sendEvent({action:a,appVersion:Pe,betaName:Le,category:"pageActions",cx:window.btoa(JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:[{schema:"iglu:com.mediavine/site/jsonschema/1-0-0",data:{siteId:f,appVersion:Pe,betaName:Le}},{schema:"iglu:com.mediavine/user/jsonschema/1-0-0",data:{isLoggedIn:u,isGDPR:!1,isUS:"US"===h,gid:Number(W),readerId:F,unverifiedReaderId:G}}]})),eventType:"ue",readerId:F,ue_px:window.btoa(JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:he({actionName:a})}))}),null===(t=Be)||void 0===t||t.sendEvent({action:a,appVersion:Pe,betaName:Le,category:"pageActions",isLoggedIn:u,readerId:F,siteId:f,gid:W,unverifiedReaderId:G||void 0,...n})},T=async e=>{let t=Z.getItem("grow-faves:unverifiedReaderId");var a;a=t,Boolean(a&&(a.startsWith('{"unverifiedReaderId":')||a.startsWith("%7B%22unverifiedReaderId%22%3A%22")))&&(t=$(t),t&&Z.setItem("grow-faves:unverifiedReaderId",t)),ze(),await me({apiUrl:r,countryCode:h,gdpr:!1,gdprConsent:null===e||void 0===e?void 0:e.tcString,unverifiedReaderId:t,readerId:P(),isGrowHeadless:!0,ghu:Z.getItem("grow-faves:ghu"),triggerSdkEvent:Re,siteId:f})},C=async(e,t)=>{const a=Boolean(!e||t&&ke(null===t||void 0===t?void 0:t.purpose.consents));a&&T(t),await async function(e){let{apiBaseUrl:t,canSendInteractionData:a,canStoreBrowserData:n,dispatch:r,sendTrackingEvent:o,initializeIndentityIntegrations:i,triggerSdkEvent:s}=e;function d(e){var d,c;if("MV_AUTHENTICATED"===(null===(d=e.data)||void 0===d?void 0:d.type)&&"string"===typeof e.data.accessToken&&"string"===typeof e.data.refreshToken)if(n&&a){o({name:(c=e.data,"sign_up"===c.authType?"sign_up_success":c.isAutoLogin?c.isIframe?"auto_login_iframe":"auto_login_window":"login_success"),isLoggedIn:!0,source:e.data.source});const a=w.getItem("grow-faves:authSource");e.data.source&&a?o({name:"authsource_change_attempt",existingAuthSource:a,newAuthSource:e.data.source}):e.data.source&&!a&&w.setItem("grow-faves:authSource",e.data.source),w.setItem("grow-faves:accessToken",e.data.accessToken),w.setItem("grow-faves:refreshToken",e.data.refreshToken),w.setItem("grow-faves:expirationTime",e.data.expirationTime),b("accessToken",e.data.accessToken),b("refreshToken",e.data.refreshToken),b("expirationTime",e.data.expirationTime),e.data.dontInitializeIds||(A({apiBaseUrl:t}),i()),r({type:"LOGIN_SUCCESS",authType:e.data.authType,isAutoLogin:e.data.isAutoLogin}),window.opener&&R()&&window.opener.postMessage({...e.data,dontInitializeIds:!0},"*")}else b("accessToken",e.data.accessToken),b("refreshToken",e.data.refreshToken),b("expirationTime",e.data.expirationTime),r({type:"LOGIN_SUCCESS",authType:e.data.authType,isAutoLogin:e.data.isAutoLogin});else if("MV_LOGGED_OUT"===e.data.type)r({type:"LOGOUT"}),n&&O(),S();else if(a&&n&&"MV_ANONYMOUS_ID_FOUND"===e.data.type)w.setItem("grow-faves:anonymousId",e.data.anonymousId),r({type:"ANONYMOUS_ID",anonymousId:e.data.anonymousId});else if("GROW_UNVERIFIED_READER_ID_FOUND"===e.data.type){const t=$(e.data.unverifiedReaderId);if(!t)return;n&&(w.setItem("grow-faves:unverifiedReaderId",t),e.data.authSource&&w.setItem("grow-faves:authSource",e.data.authSource)),o({name:"iframe_received_unverified_reader_id",hasUnverifiedReaderIdAlready:n&&Boolean(w.getItem("grow-faves:unverifiedReaderId"))}),i()}else"GROW_SUBSCRIBE_SUCCESS"===e.data.type?(n&&(w.setItem("grow-faves:unverifiedReaderId",e.data.unverifiedReaderId),i()),r({type:"SUBSCRIBE_SUCCESS",readerId:e.data.unverifiedReaderId,widgetId:e.data.widgetId})):"GROW_SUBSCRIBE_FAIL"===e.data.type?r({type:"SUBSCRIBE_FAILED",widgetId:e.data.widgetId}):n&&"MV_COOKIES_NOT_ALLOWED"===e.data.type?(w.setItem("grow-faves:cookiesNotAllowed","true"),r({type:"COOKIES_NOT_ALLOWED"})):"MV_IFRAME_FLOW_COMPLETE"===e.data.type?r({type:"IFRAME_FLOW_COMPLETE"}):"GROW_IDS_GENERATED"===e.data.type&&n&&(A({apiBaseUrl:t}),e.data.liverampEnvelope&&te(e.data.liverampEnvelope,s),e.data.liverampEnvelopes&&ae(e.data.liverampEnvelopes),e.data.uid2&&g(e.data.uid2,s),e.data.id5&&oe(e.data.id5,s),e.data.publinkId&&le(e.data.publinkId,s),e.data.amazonApsEnvelope&&pe(e.data.amazonApsEnvelope,s))}return a&&await v(),window.addEventListener("message",d),d}({canSendInteractionData:a,canStoreBrowserData:a,apiBaseUrl:r,dispatch:()=>{},sendTrackingEvent:E,initializeIndentityIntegrations:T}),u||Z.getItem("grow-faves:cookiesNotAllowed")||function(e){let{siteId:t,iframeUrl:a,isHeadless:n,isGdpr:r}=e;const o=document.createElement("iframe");o.style.display="none",o.id="grow-login-iframe";const i=new URL(a);i.searchParams.set("siteId",t),i.searchParams.set("isHeadless",String(null!==n&&void 0!==n&&n)),i.searchParams.set("callback",window.location.href),i.searchParams.set("isGdprCountry",String(null!==r&&void 0!==r&&r)),o.src=i.toString(),document.body.appendChild(o)}({siteId:f,iframeUrl:c,isHeadless:!0})};if(I?await new Promise(((e,t)=>{let a=0;const n=setInterval((()=>{var r;const o=null===(r=window)||void 0===r?void 0:r.__tcfapi;"function"===typeof o?(function(e){e("addEventListener",2,(async(e,t)=>{var a;!t||"tcloaded"!==(null===e||void 0===e?void 0:e.eventStatus)&&"useractioncomplete"!==(null===e||void 0===e?void 0:e.eventStatus)||(y=ke(null===e||void 0===e?void 0:e.purpose.consents)||!1,Y({isGdpr:I,hasFullTcfConsent:y}),await C(I,e),k=!I||y,k&&(null===(a=Be)||void 0===a||a.enable()))}))}(o),clearInterval(n),e()):a>=10?(clearInterval(n),t(new Error("TCF API not found after 10 attempts"))):a++}),500)})):await C(I),!y)return;let D=null;try{D=new URL(decodeURIComponent(window.location.href))}catch(re){}const L=new URLSearchParams(null===(a=D)||void 0===a?void 0:a.search),B=L.get("domainUserId"),x=L.get("sessionId"),z=Number(L.get("visitCount")),V=Number(L.get("lastEventTimestamp")),j=L.get("sh_kit");let H;j&&Se.setItem("grow-faves:hasConvertkitHash","true"),B&&x&&z&&V&&(H={domainUserId:B,sessionId:x,visitCount:z,lastEventTimestamp:V}),Be=new q({collectorUrl:o,appId:i,trackerNamespace:s,appVersion:d,isEnabled:!0,snowplowSession:H,sendPageViewId:!0});let M=Z.getItem("grow-faves:ghu");!M&&j&&(({ghu:M}=await Ie(j)),M&&Z.setItem("grow-faves:ghu",M));const F=P(),G=Z.getItem("grow-faves:unverifiedReaderId"),J=null!==(n=localStorage.getItem("grow-faves:authSource"))&&void 0!==n?n:null,W=N({isLoggedIn:u,unverifiedReaderId:G,authSource:J,ghu:M});if(E({name:"page_render"}),Ne=function(e,t){const a=new URL(window.location.href),n=window.location.hash.replace("#","");if(!n)return{};const r=new URLSearchParams(n),o=xe.reduce(((e,t)=>{const a=r.get(t);return a?{...e,[t]:a}:e}),{});if(!Object.keys(o).length)return{};const{redirectUri:i,growMeCode:s,growUnverifiedReaderId:d,growAuthSource:c,growGhu:l,...u}=o;if(d&&e&&!Z.getItem("grow-faves:unverifiedReaderId")){const e=$(d);e&&Z.setItem("grow-faves:unverifiedReaderId",e)}return l&&e&&!Z.getItem("grow-faves:ghu")&&Z.setItem("grow-faves:ghu",l.toString()),c&&e&&!Z.getItem("grow-faves:authSource")?Z.setItem("grow-faves:authSource",c.toString()):c&&e&&Z.getItem("grow-faves:authSource")&&t({name:"authsource_change_attempt",existingAuthSource:Z.getItem("grow-faves:authSource"),newAuthSource:c.toString()}),o.growSource&&e&&Se.setItem("grow-faves:growSource",o.growSource),window.history.replaceState(null,document.title,a.toString()),{...u,authCodeParams:s&&i?{redirectUri:i,growMeCode:s,growMeSignUp:!1}:null}}(!0,E),Ne.growReferrer){const{ga:e,__gaTracker:t}=window,a=e||t;a&&a("set","referrer",window.location.origin)}if(Ne.growMeShortenerToken&&!m)try{await async function(e,t,a){const n=await fetch(`${e}/tokens`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json","content-type":"application/json"},body:JSON.stringify({siteId:a}),method:"POST"}),r=await n.json();if(!n.ok)throw new Error(r.error);return _({accessToken:r.access_token,refreshToken:r.refresh_token,expiresIn:r.expires_in}),r}(r,Ne.growMeShortenerToken,f)}catch(re){0}else if(Ne.authCodeParams)try{await async function(e){let{apiUrl:t,redirectUri:a,siteId:n,growMeCode:r}=e;const o=await fetch(`${t}/auth-code-tokens`,{headers:{Accept:"application/json","content-type":"application/json"},body:JSON.stringify({siteId:n,redirectUri:a,growMeCode:r}),method:"POST"}),i=await o.json();if(!o.ok)throw new Error(i.error);return _({accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}),i}({...Ne.authCodeParams,apiUrl:r,siteId:f})}catch(re){0}await A({apiBaseUrl:r});const Q=Se.getItem("grow-faves:arbitraryForm:potentialEmail"),K=Se.getItem("grow-faves:arbitraryForm:timestamp"),X=Se.getItem("grow-faves:arbitraryForm:signature"),ee=null===(l=D)||void 0===l?void 0:l.hostname;if(Q&&K&&X&&ee){const e=await Ee({potentialEmail:Q,hostname:ee,timestamp:K,signature:X});E(e?{name:"arbitrary_form_submission",success:e}:{name:"arbitrary_form_submission_failed"})}else{var ne;const e=Te({sendTrackingEvent:E,isPrivacyState:null===(ne=De)||void 0===ne?void 0:ne.isAdditionalPrivacyState,isLoggedIn:u,url:D,initializeIndentityIntegrationsFn:T});document.querySelectorAll(`:not(${$e}) form`).forEach((t=>{t.addEventListener("submit",e)}))}!function(){var e;const t=window,a=(null===t||void 0===t||null===(e=t.growMe)||void 0===e?void 0:e._)||[],n=window;n.growMe=e=>e(),n.growMe.on=(e,t)=>{const a=Ae(e,Ce);if(!a)return void console.warn(`Grow: unknown event name ${e}`);const n=Ue[a];n?n.push(t):Ue[a]=[t]},n.growMe.removeListener=(e,t)=>{const a=Ae(e,Ce);if(!a)return void console.warn(`Grow: unknown event name ${e}`);const n=Ue[a];Ue[a]=null===n||void 0===n?void 0:n.filter((e=>e!==t))},n.growMe.getIsBookmarked=()=>null,a.forEach((e=>e()))}(),Re({name:"loaded",value:{version:`headless-${Pe}`,source:Ne.growSource}}),ze(),E({name:"headless_render",growSource:Se.getItem("grow-faves:growSource"),hasConvertkitHash:"true"===Se.getItem("grow-faves:hasConvertkitHash")})}()})();